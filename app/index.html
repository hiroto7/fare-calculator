<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c" rel="stylesheet">
<style>
    body {
        background-color: snow;
        font-family: "M PLUS Rounded 1c";
        margin: 0;
    }
</style>

<template id="x-line-summary-template">
    <style>
        :host {
            background-color: var(--color, gray);
            border-bottom-left-radius: var(--border-bottom-radius, 0);
            border-bottom-right-radius: var(--border-bottom-radius, 0);
            border-top-left-radius: var(--border-top-radius, 0);
            border-top-right-radius: var(--border-top-radius, 0);
            color: white;
            display: inline-flex;
            flex-direction: column;
            justify-content: center;
            padding: 8px;
        }

        ::slotted(*) {
            margin: 0;
        }

        ::slotted(h1) {
            font-size: 16px;
        }

        ::slotted(p) {
            font-size: 12px;
        }
    </style>
    <slot name="summary"></slot>
</template>

<template id="x-line-button-template">
    <style>
        :host {
            --border-bottom-radius: 4px;
            --border-top-radius: 4px;
            column-gap: 4px;
            cursor: pointer;
            display: inline-grid;
            grid-template-columns: repeat(var(--symbols-count), 32px) 1fr;
            user-select: none;
        }

        :host(:hover) ::slotted(img),
        :host(:hover) x-line-summary {
            filter: brightness(1.125);
        }

        :host(:active) ::slotted(img),
        :host(:active) x-line-summary {
            filter: brightness(0.75);
        }

        ::slotted(img) {
            align-self: center;
            width: 100%;
            margin: 2px 0;
        }

        x-line-summary {
            grid-column: -2;
        }
    </style>
    <slot name="symbol"></slot>
    <x-line-summary>
        <slot name="summary" slot="summary"></slot>
    </x-line-summary>
</template>

<template id="x-direction-list-template">
    <style>
        :host {
            column-gap: 4px;
            display: inline-grid;
            grid-template-columns: repeat(var(--symbols-count), 32px) 1fr;
            row-gap: 1px;
            user-select: none;
        }

        ::slotted(x-line-button) {
            --border-bottom-radius: 0;
            --border-top-radius: 0;
            display: contents;
        }

        ::slotted(x-line-button:first-of-type) {
            --border-top-radius: 4px;
        }

        ::slotted(x-line-button:last-of-type) {
            --border-bottom-radius: 4px;
        }
    </style>
    <slot name="direction"></slot>
</template>

<template id="x-named-direction-list-template">
    <style>
        :host {
            display: inline-flex;
            flex-direction: column;
        }

        ::slotted(*) {
            margin: 0;
        }

        ::slotted(h1) {
            font-size: 16px;
        }

        ::slotted(p) {
            font-size: 12px;
        }

        .summary {
            color: gray;
            margin-bottom: 8px;
        }

        x-direction-list {
            flex-grow: 1;
        }
    </style>
    <div class="summary">
        <slot name="summary"></slot>
    </div>
    <x-direction-list>
        <slot name="direction" slot="direction"></slot>
    </x-direction-list>
</template>

<template id="x-line-list-template">
    <style>
        :host {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(256px, 1fr));
            gap: 16px;
        }
    </style>
    <slot name="line"></slot>
</template>

<script>
    for (const name of [
        'x-line-button',
        'x-line-list',
        'x-direction-list',
        'x-named-direction-list',
        'x-line-summary',
    ]) {
        customElements.define(name,
            class extends HTMLElement {
                constructor() {
                    super();
                    const template = document
                        .getElementById(`${name}-template`)
                        .content;
                    const shadowRoot = this.attachShadow({ mode: 'open' })
                        .appendChild(template.cloneNode(true));
                }
            });
    }
</script>

<header style="margin: 8px;">
    <h1>fare-calculator</h1>
    <p><a href="https://github.com/hiroto7/fare-calculator">hiroto7/fare-calculator</a></p>
</header>

<form style="margin: 8px;">
    <p>
        station: <input type="input" id="station-input">
        <input type="button" value="show" id="show-button">
        <input type="button" value="clear" id="clear-button">
    </p>
    <p id="p1" style="color: red;"></p>
</form>

<x-line-list style="margin: 16px;" id="list1">
</x-line-list>

<p id="loading" style="margin: 8px;">Loading ...</p>
<section id="sec1" style="margin: 8px;">
</section>
<script src="bundle.js"></script>